#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running pre-commit checks..."

# Navigate to project root
cd "$(dirname "$0")/.."

# Run linting and formatting for backend
echo "📦 Checking backend..."
cd backend
if [ -f "package.json" ]; then
  npm run lint:fix
  npm run format
  npm run type-check
fi

# Run linting and formatting for frontend
echo "🎨 Checking frontend..."
cd ../frontend
if [ -f "package.json" ]; then
  npm run lint:fix
  npm run format
  npm run type-check
fi

# Add formatted files
cd ..
git add .

echo "✅ Pre-commit checks passed!"
